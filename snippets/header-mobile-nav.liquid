<div
  class="absolute z-10 top-0 inset-x-0 p-2 transform origin-top-left md:hidden"
  x-show="mobileMenuOpen"
  @click.away="mobileMenuOpen = false"
>
  <div class="shadow-lg rounded-lg border border-gray-100 bg-white w-full">
    <div class="p-5 divide-y-2 divide-gray-50">
      <!-- MOBILE MENU HEADER TITLE PLUS CLOSE BUTTON -->
      <div class="flex items-center justify-between pb-3">
        <div>
          <h1 class="text-lg text-gray-500">{{ section.settings.mobile_menu_title }}</h1>
        </div>
        <div class="-mr-2">
          <button
            class="bg-white rounded-md p-2 text-gray-500"
            x-on:click="mobileMenuOpen = false"
          >
            {% render 'icon-close' %}
          </button>
        </div>
      </div>

      <!-- NAVIGATION LINKS FOR MOBILE MENU -->
      <div class="pt-3">
        <nav class="grid gap-y-7">
          {% for link in main_menu_linklist %}
            {% assign link_handle = link.handle | replace: '-', '_' %}
            {% if link.links != blank %}
              <div
                class="relative"
                x-data="{ {{ link_handle }}: false }"
              >
                <button
                  class="text-base text-gray-500 hover:text-gray-900 flex items-center justify-between w-full"
                  x-on:click="{{ link_handle }} = !{{ link_handle }}"
                >
                  <div>{{ link.title }}</div>
                  {% render 'icon-dropdown' %}
                </button>
                <div class="grid gap-y-7 py-3" x-show="{{ link_handle }}">
                  {% for child_link in link.links %}
                    <a
                      href="{{ child_link.url }}"
                      class="-m-3 p-3 mt-2 flex items-center rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-50"
                    >
                      <span class="ml-3 text-base font-medium text-gray-500"> {{ child_link.title }}</span>
                    </a>
                  {% endfor %}
                </div>
              </div>
            {% else %}
              <a
                href="{{ link.url }}"
                class="-m-3 p-3 flex items-center rounded-md text-gray-500 hover:text-gray-900 hover:bg-gray-50"
              >
                {{ link.title }}
              </a>
            {% endif %}
          {% endfor %}
        </nav>
      </div>
    </div>
  </div>
</div>
